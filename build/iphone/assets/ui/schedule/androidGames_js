function androidGames(e){function l(e){var t=new Array(7);return t[0]="Sunday",t[1]="Monday",t[2]="Tuesday",t[3]="Wednesday",t[4]="Thursday",t[5]="Friday",t[6]="Saturday",t[e.getDay()]}function v(e){var t=e.date.getFullYear()+"/"+(e.date.getMonth()+1)+"/"+e.date.getDate(),r=t.split("/"),i=r[1],s=r[0],o=r[2],u=r[1]+"/"+r[2],a=r[1]+"/"+r[2]+"/"+r[0],f=e.city,c=e.state,h=e.type,p=e.title,d=a,v=h+"   "+f,m=YYYY+"/"+MM+"/"+DD,g=new Date(m),y=new Date(g.getTime()+6048e5),b=y.toString(),w=b.split(" "),E=month(w[1]),S=E+"/"+w[2]+"/"+w[3];flag_repeated_day=!1;if(new Date(firstDay)<=e.date&&e.date<=new Date(lastDay)){var x=Ti.UI.createTableViewRow({height:"80dp",hasChild:!1,layout:"vertical"});if(days_stack.indexOf(d)===-1){var T=Ti.UI.createView({height:"20dp",top:0,left:0,right:0,backgroundColor:"#CCC"});Ti.Platform.osname==="android"?T.width="100%":T.zIndex=1e3;var N=Ti.UI.createLabel({text:getMonthString(i)+" "+o+", "+s,width:"auto",height:"auto",textAlign:"right",top:0,right:"10dp",color:"#444",font:{fontWeight:"bold",fontSize:"16dp"},verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER}),C=Ti.UI.createLabel({text:l(e.date),width:"auto",height:"auto",textAlign:"left",top:0,left:"10dp",color:"#444",font:{fontWeight:"bold",fontSize:"16dp"},verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER});T.add(N),T.add(C),x.add(T),days_stack.push(d)}else{var T=Ti.UI.createView({height:"20dp",top:0,left:0,right:0,backgroundColor:"#CCC"});Ti.Platform.osname==="android"?T.width="100%":T.zIndex=1e3;var N=Ti.UI.createLabel({text:getMonthString(i)+" "+o+", "+s,width:"auto",height:"auto",textAlign:"right",top:0,right:"10dp",color:"#444",font:{fontWeight:"bold",fontSize:"16dp"},verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER}),C=Ti.UI.createLabel({text:l(e.date),width:"auto",height:"auto",textAlign:"left",top:0,left:"10dp",color:"#444",font:{fontWeight:"bold",fontSize:"16dp"},verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER});T.add(N),T.add(C),x.add(T),days_stack.push(d)}var k=Ti.UI.createLabel({text:p,width:"auto",height:"20dp",textAlign:"left",top:"7dp",left:"10dp",color:"black",font:{fontWeight:"bold",fontSize:"14dp"},verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_TOP}),L=Ti.UI.createLabel({text:v,width:"auto",height:"20dp",textAlign:"left",top:"2dp",left:"10dp",color:"black",font:{fontSize:"14dp"}});x.add(k),x.add(L),x.thisTitle=p,x.thisDate=d,x.thisDetail=v,n.push(x)}}function m(e,t){var n=864e5,r=e,i=t,s=Math.round(Math.abs((r.getTime()-i.getTime())/n));return s}var t=Ti.UI.createWindow({title:"Upcoming Games",backgroundImage:"images/bg.png",backgroundColor:"transparent"}),n=[],r,i,s=Ti.UI.createTableView({top:"40dp",allowsSelection:!1,separatorColor:"#CCC"});t.add(s);var o=Ti.UI.createActivityIndicator({font:{fontFamily:"Helvetica Neue",fontSize:18,fontWeight:"bold"},color:"Black",message:"Loading...",width:"auto",zIndex:1e3,bottom:0});Ti.Platform.osname==="ipad"?o.style=Ti.UI.iPhone.ActivityIndicatorStyle.DARK:o.style=Ti.UI.ActivityIndicatorStyle.BIG_DARK,s.add(o),o.show(),begin=require("/services/games"),events=new begin,u=new Date,DD=u.getDate(),MM=u.getMonth()+1,YYYY=u.getFullYear(),Ti.API.info("Acording to JavaScript the month is "+MM),DD<10&&(DD="0"+DD),MM<10&&(MM="0"+MM);var u=MM+"/"+DD+"/"+YYYY,a=MM+"/"+DD;lastDay=new Date(YYYY,MM,0),firstDay=new Date(YYYY,MM-1,1),months_stack=new Array,days_stack=new Array;var f=!1,c=Ti.UI.createView({top:"0dp",width:"100%",height:"45dp"}),h=Ti.UI.createLabel({text:myMonthString(MM),textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontSize:20,fontWeight:"bold"},width:Ti.UI.SIZE}),p=Ti.UI.createButton({borderWidth:0,color:"#000",top:"2dp",title:">",right:"5dp",backgroundColor:"transparent",font:{fontSize:20,fontWeight:"bold"},width:"30dp"}),d=Ti.UI.createButton({borderWidth:0,color:"#000",title:"<",left:"5dp",top:"2dp",backgroundColor:"transparent",font:{fontSize:20,fontWeight:"bold"},width:"30dp"});return c.add(d),c.add(h),c.add(p),t.add(c),Ti.App.addEventListener("get.events",function(e){if(f===!1){f=!0;var t=JSON.parse(e.responseText),u=t,a=new Array;for(var l=0;l<u.length;l++){var c=u[l].date,g=u[l].date,y=c.replace(/T00:00:00/g,""),b=g.replace(/T00:00:00/g,""),w=y.replace(/-/g,"/"),E=b.replace(/-/g,"/"),S=w.split("/"),x=E.split("/"),T=new Date(S[0],S[1]-1,S[2]),N=new Date(x[0],x[1]-1,x[2]),C=new Date(S[0],S[1]-1,S[2]),k={date:T,day:w,title:u[l].game,city:u[l].time,state:u[l].home,type:u[l].score};a.push(k);for(var L=1;L<=m(T,N);L++){var A=new Date(T.getFullYear(),T.getMonth(),T.getDate()+L),O=A.getMonth(),M=A.getDate();A.getMonth()<10&&(O="0"+A.getMonth()),A.getDate()<10&&(M="0"+A.getDate()),a.push({date:A,day:A.getFullYear()+"/"+O+"/"+M,title:u[l].game,city:u[l].time,state:u[l].home,type:u[l].score})}}a.sort(function(e,t){return e=new Date(e.date),t=new Date(t.date),e>t?1:e<t?-1:0});for(var l=0;l<a.length;l++)v(a[l]);o.hide(),s.setData(n),p.addEventListener("click",function(){n=[],s.setData(n);if(r===undefined){Ti.API.info("Our new month is undefined");var e=new Date,t=e.getMonth(),u=e.getFullYear();t==11?(t=0,u=YYYY++):t++,firstDay=new Date(u,t,1),lastDay=new Date(YYYY,t+1,0),r=firstDay,Ti.API.info("Out new first day is..."+firstDay+"and our last day will be..."+lastDay);var f=firstDay.getMonth()+1;f<10&&(f="0"+f);var l=myMonthString(f);Ti.API.info("the display data "+f+" or "+l),h.text=l;for(var c=0;c<a.length;c++)v(a[c]);o.hide(),s.setData(n)}else{Ti.API.info("Our New Months are defined  "+r);var p=new Date(r),d=p.getMonth(),m=p.getFullYear();d==11?(d=0,m=YYYY++):d++,firstDay=new Date(m,d,1),lastDay=new Date(YYYY,d+1,0),Ti.API.info("Out new first day is..."+firstDay+"and our last day will be..."+lastDay);var f=firstDay.getMonth()+1;r=firstDay,i=lastDay,f<10&&(f="0"+f);var l=myMonthString(f);Ti.API.info("the display data "+f+" or "+l),h.text=l;for(var c=0;c<a.length;c++)v(a[c]);o.hide(),s.setData(n)}}),d.addEventListener("click",function(){alert("I Have been clicked");var e=new Date,t=e.getMonth(),u=32-(new Date(YYYY,t,32)).getDate(),f=32-(new Date(YYYY,t-1,32)).getDate(),l=32-(new Date(YYYY,t+1,u)).getDate();n=[],s.setData(n);if(r===undefined){Ti.API.info("Our new months are undefined");var c=new Date,p=c.getMonth(),d=c.getFullYear();p==0?(p=11,d=YYYY--):p--,Ti.API.info("We are getting the month..."+p+" and the year if necessary "+d),firstDay=new Date(d,p,1),lastDay=new Date(YYYY,p+1,0),Ti.API.info("Out new first day is..."+firstDay+"and our last day will be..."+lastDay),r=firstDay;var m=firstDay.getMonth()+1;m<10&&(m="0"+m);var g=myMonthString(m);Ti.API.info("the display data "+m+" or "+g),h.text=g;for(var y=0;y<a.length;y++)v(a[y]);o.hide(),s.setData(n)}else{Ti.API.info("Our New Months are defined.  "+r);var b=new Date(r),w=b.getMonth(),E=b.getFullYear();w==0?(w=11,E=YYYY--):w--,Ti.API.info("We are getting the month..."+w+" and the year if necessary "+E),firstDay=new Date(E,w,1),lastDay=new Date(YYYY,w+1,0),Ti.API.info("Out new first day is..."+firstDay+"and our last day will be..."+lastDay);var m=firstDay.getMonth()+1;r=firstDay,i=lastDay,m<10&&(m="0"+m);var g=myMonthString(m);Ti.API.info("the display data "+m+" or "+g),h.text=g;for(var y=0;y<a.length;y++)v(a[y]);o.hide(),s.setData(n)}})}}),t}function getMonthString(e){switch(e){case"1":e="January";break;case"2":e="February";break;case"3":e="March";break;case"4":e="April";break;case"5":e="May";break;case"6":e="June";break;case"7":e="July";break;case"8":e="August";break;case"9":e="September";break;case"10":e="October";break;case"11":e="November";break;case"12":e="December"}return e}function myMonthString(e){switch(e){case"01":e="January";break;case"02":e="February";break;case"03":e="March";break;case"04":e="April";break;case"05":e="May";break;case"06":e="June";break;case"07":e="July";break;case"08":e="August";break;case"09":e="September";break;case"10":e="October";break;case"11":e="November";break;case"12":e="December"}return e}function month(e){switch(e){case"Jan":e="01";break;case"Feb":e="02";break;case"Mar":e="03";break;case"Apr":e="04";break;case"May":e="05";break;case"Jun":e="06";break;case"Jul":e="07";break;case"Aug":e="08";break;case"Sep":e="09";break;case"Oct":e="10";break;case"Nov":e="11";break;case"Dec":e="12"}return e}module.exports=androidGames