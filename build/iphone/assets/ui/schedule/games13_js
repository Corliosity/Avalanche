function games13(e){function p(e){var t=new Array(7);return t[0]="Sunday",t[1]="Monday",t[2]="Tuesday",t[3]="Wednesday",t[4]="Thursday",t[5]="Friday",t[6]="Saturday",t[e.getDay()]}function y(e){var t=e.date.getFullYear()+"/"+(e.date.getMonth()+1)+"/"+e.date.getDate(),n=t.split("/"),i=n[1],s=n[0],o=n[2],u=n[1]+"/"+n[2],l=n[1]+"/"+n[2]+"/"+n[0],c=e.city,h=e.state,d=e.type,v=e.title,m=l,g=YYYY+"/"+MM+"/"+DD,y=new Date(g),b=new Date(y.getTime()+6048e5),E=b.toString(),x=E.split(" "),T=S(x[1]),N=T+"/"+x[2]+"/"+x[3];if(new Date(a)<=e.date&&e.date<=new Date(f)){var C=Ti.UI.createTableViewRow({height:"90dp",hasChild:!1,backgroundColor:e.home=="true"?"#9F1D35":""});if(days_stack.indexOf(m)===-1){var k=Ti.UI.createView({height:"20dp",top:0,left:0,right:0,backgroundColor:"#CCC"});Ti.Platform.osname==="android"?k.width="100%":k.zIndex=1e3;var L=Ti.UI.createLabel({text:w(i)+" "+o+", "+s,width:"auto",height:"auto",textAlign:"right",top:0,right:"10dp",color:"#444",font:{fontWeight:"bold",fontSize:"16dp"},verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER}),A=Ti.UI.createLabel({text:p(e.date),width:"auto",height:"auto",textAlign:"left",top:0,left:"10dp",color:"#444",font:{fontWeight:"bold",fontSize:"16dp"},verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER});k.add(L),k.add(A),C.add(k),days_stack.push(m)}else{var k=Ti.UI.createView({height:"20dp",top:0,left:0,right:0,backgroundColor:"#CCC"});Ti.Platform.osname==="android"?k.width="100%":k.zIndex=1e3;var L=Ti.UI.createLabel({text:w(i)+" "+o+", "+s,width:"auto",height:"auto",textAlign:"right",top:0,right:"10dp",color:"#444",font:{fontWeight:"bold",fontSize:"16dp"},verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER}),A=Ti.UI.createLabel({text:p(e.date),width:"auto",height:"auto",textAlign:"left",top:0,left:"10dp",color:"#444",font:{fontWeight:"bold",fontSize:"16dp"},verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER});k.add(L),k.add(A),C.add(k),days_stack.push(m)}var O=Ti.UI.createImageView({image:"http://www.corliosity.com/json/"+e.away,left:"0dp",top:"20dp",height:50,width:50}),M=Ti.UI.createLabel({text:v,width:"auto",height:"20dp",textAlign:"left",top:"25dp",left:"70dp",color:"black",font:{fontWeight:"bold",fontSize:"14dp"},verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_TOP,color:e.home===!0?"#eaeaea":"#000"}),_=Ti.UI.createLabel({text:d,width:"auto",height:"auto",textAlign:"left",top:"45dp",left:"70dp",color:"black",font:{fontSize:"14dp"},color:e.home=="true"?"#eaeaea":"#000"}),D=Ti.UI.createLabel({text:"Puck Drop is "+e.puckTime,width:Ti.UI.SIZE,height:Ti.UI.SIZE,left:"70dp",top:"60dp",font:{fontSize:14}}),P=Ti.UI.createImageView({image:"http://www.corliosity.com/json/"+e.homeTeam,height:50,width:50,right:"30dp",top:"20dp"});C.add(O),C.add(P),C.add(M),C.add(_),C.add(D),C.thisTitle=v,C.thisDate=m,r.push(C)}else if(!e.date)var C=Ti.UI.createTableViewRow({height:"80dp",hasChild:!1,layout:"vertical",title:"No Games this Month, see you in the Fall"})}function b(e,t){var n=864e5,r=e,i=t,s=Math.round(Math.abs((r.getTime()-i.getTime())/n));return s}function w(e){switch(e){case"1":e="January";break;case"2":e="February";break;case"3":e="March";break;case"4":e="April";break;case"5":e="May";break;case"6":e="June";break;case"7":e="July";break;case"8":e="August";break;case"9":e="September";break;case"10":e="October";break;case"11":e="November";break;case"12":e="December"}return e}function E(e){switch(e){case"01":e="January";break;case"02":e="February";break;case"03":e="March";break;case"04":e="April";break;case"05":e="May";break;case"06":e="June";break;case"07":e="July";break;case"08":e="August";break;case"09":e="September";break;case"10":e="October";break;case"11":e="November";break;case"12":e="December"}return e}function S(e){switch(e){case"Jan":e="01";break;case"Feb":e="02";break;case"Mar":e="03";break;case"Apr":e="04";break;case"May":e="05";break;case"Jun":e="06";break;case"Jul":e="07";break;case"Aug":e="08";break;case"Sep":e="09";break;case"Oct":e="10";break;case"Nov":e="11";break;case"Dec":e="12"}return e}var t=Ti.Platform.osname,n=Ti.UI.createWindow({title:"Schedule",backgroundColor:"#eaeaea",barColor:"#13386c",navBarHidden:t==="ipad"||t=="iphone"?!1:!0,layout:"vertical",backButtonTitle:"Back"}),r=[],i,s;Ti.API.info("What are the above variables equal to  "+i);var o=Ti.UI.createTableView({top:"0dp",allowsSelection:!0,separatorColor:"#CCC"}),u=Ti.UI.createActivityIndicator({font:{fontFamily:"Helvetica Neue",fontSize:18,fontWeight:"bold"},color:"Black",message:"Loading...",width:"auto",zIndex:1e3,bottom:0});Ti.Platform.osname==="ipad"||Ti.Platform.osname=="iphone"?u.style=Ti.UI.iPhone.ActivityIndicatorStyle.DARK:u.style=Ti.UI.ActivityIndicatorStyle.BIG_DARK,o.add(u),u.show(),begin=require("services/games"),events=new begin;var a,f;l=new Date,DD=l.getDate(),MM=l.getMonth()+1,YYYY=l.getFullYear(),DD<10&&(DD="0"+DD),MM<10&&(MM="0"+MM);var l=MM+"/"+DD+"/"+YYYY,c=MM+"/"+DD;f=new Date(YYYY,MM,0),a=new Date(YYYY,MM-1,1),Ti.API.info("The first day of the Month "+a+" And our last day is...."+f),months_stack=new Array,days_stack=new Array;var h=!1,d=Ti.UI.createView({top:"0dp",width:"100%",height:"45dp"}),v=Ti.UI.createLabel({text:E(MM),textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontSize:20,fontWeight:"bold"},width:Ti.UI.FILL}),m=Ti.UI.createButton({borderWidth:0,color:"#000",top:"2dp",title:">",right:"5dp",backgroundColor:"transparent",font:{fontSize:20,fontWeight:"bold"}}),g=Ti.UI.createButton({borderWidth:0,color:"#000",title:"<",left:"5dp",top:"2dp",backgroundColor:"transparent",font:{fontSize:20,fontWeight:"bold"}});if(t=="iphone"||t=="ipad")d.add(g),d.add(v),d.add(m),n.add(d);return n.add(o),Ti.App.addEventListener("get.events",function(e){if(h===!1){h=!0;var n=JSON.parse(e.responseText),s=n,l=new Array;for(var c=0;c<s.length;c++){var p=s[c].date,d=s[c].date,w=s[c].game,S=w.split(" "),x=p.replace(/T00:00:00/g,""),T=d.replace(/T00:00:00/g,""),N=x.replace(/-/g,"/"),C=T.replace(/-/g,"/"),k=N.split("/"),L=C.split("/"),A=new Date(k[0],k[1]-1,k[2]),O=new Date(L[0],L[1]-1,L[2]),M=new Date(k[0],k[1]-1,k[2]),_={date:A,day:N,title:s[c].game,city:s[c].av_standing,state:s[c].other_standing,type:s[c].score,home:s[c].home,puckTime:s[c].time==""?"":s[c].time,away:s[c].away==""?"logos/"+S[0].toLowerCase()+".png":s[c].away,homeTeam:s[c].myhome==""?"logos/"+S[2].toLowerCase()+".png":s[c].myhome};l.push(_);for(var D=1;D<=b(A,O);D++){var P=new Date(A.getFullYear(),A.getMonth(),A.getDate()+D),H=P.getMonth(),B=P.getDate();P.getMonth()<10&&(H="0"+P.getMonth()),P.getDate()<10&&(B="0"+P.getDate())}}l.sort(function(e,t){return e=new Date(e.date),t=new Date(t.date),e>t?1:e<t?-1:0});for(var c=0;c<l.length;c++)y(l[c]);u.hide(),o.setData(r);if(t=="iphone"||t=="ipad")m.addEventListener("click",function(){r=[],o.setData(r);if(i===undefined){Ti.API.info("Our new month is undefined");var e=new Date,t=e.getMonth(),n=e.getFullYear();t==11?(t=0,n=YYYY++):t++,a=new Date(n,t,1),f=new Date(YYYY,t+1,0),i=a,Ti.API.info("Out new first day is..."+a+"and our last day will be..."+f);var s=a.getMonth()+1;s<10&&(s="0"+s);var c=E(s);Ti.API.info("the display data "+s+" or "+c),v.text=c;for(var h=0;h<l.length;h++)y(l[h]);u.hide(),o.setData(r)}else{Ti.API.info("Our New Months are defined  "+i);var p=new Date(i),d=p.getMonth(),m=p.getFullYear();d==11?(d=0,m=YYYY++):d++,a=new Date(m,d,1),f=new Date(YYYY,d+1,0),Ti.API.info("Out new first day is..."+a+"and our last day will be..."+f);var s=a.getMonth()+1;i=a,contianerEndMonth=f,s<10&&(s="0"+s);var c=E(s);Ti.API.info("the display data "+s+" or "+c),v.text=c;for(var h=0;h<l.length;h++)y(l[h]);u.hide(),o.setData(r)}}),g.addEventListener("click",function(){var e=new Date,t=e.getMonth(),n=32-(new Date(YYYY,t,32)).getDate(),s=32-(new Date(YYYY,t-1,32)).getDate(),c=32-(new Date(YYYY,t+1,n)).getDate();r=[],o.setData(r);if(i===undefined){Ti.API.info("Our new months are undefined");var h=new Date,p=h.getMonth(),d=h.getFullYear();p==0?(p=11,d=YYYY--):p--,Ti.API.info("We are getting the month..."+p+" and the year if necessary "+d),a=new Date(d,p,1),f=new Date(YYYY,p+1,0),Ti.API.info("Out new first day is..."+a+"and our last day will be..."+f),i=a;var m=a.getMonth()+1;m<10&&(m="0"+m);var g=E(m);Ti.API.info("the display data "+m+" or "+g),v.text=g;for(var b=0;b<l.length;b++)y(l[b]);u.hide(),o.setData(r)}else{Ti.API.info("Our New Months are defined.  "+i);var w=new Date(i),S=w.getMonth(),x=w.getFullYear();S==0?(S=11,x=YYYY--):S--,Ti.API.info("We are getting the month..."+S+" and the year if necessary "+x),a=new Date(x,S,1),f=new Date(YYYY,S+1,0),Ti.API.info("Out new first day is..."+a+"and our last day will be..."+f);var m=a.getMonth()+1;i=a,contianerEndMonth=f,m<10&&(m="0"+m);var g=E(m);Ti.API.info("the display data "+m+" or "+g),v.text=g;for(var b=0;b<l.length;b++)y(l[b]);u.hide(),o.setData(r)}})}}),o.addEventListener("click",function(e){Ti.API.info("Clicked "+e.row.thisTitle)}),n}module.exports=games13